<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulador RPG - Minimal</title>
  <link rel="stylesheet" href="css/rpg.css">
  <link rel="stylesheet" href="css/estilo.css">
  <link rel="icon" href="./assets/imgs/ebisu-icon.png">
</head>
<body>
  <div class="header">
    <div class="container">
      <div id="logo">
        <a href="index.html"><img src="assets/imgs/ebisu-icon.png" width="50px"></a>
        <h1 class="titulo">Dorohedoro</h1>
      </div>
      <ul class="navbar">
        <li class="agora"><a href="./index.html#banner">Sobre</a></li>
        <li><a href="./index.html#volumes">Volumes</a></li>
        <li><a href="ranking.html">Ranking</a></li>
        <li><a href="avaliacao.html">Avaliacao</a></li>
        <li><a href="rpg.html">Rpg</a></li>
      </ul>
      <div class="btnEntrarLogin">
        <a href="login.html" id="log">Login</a>
        <a href="cadastro.html" id="cad">Cadastrar-se</a>
      </div>
    </div>
  </div>

  <div class="container-rpg">
    <h1>DoroVerse</h1>

    <label>
      Escolha o inimigo:
      <select id="selectInimigo" onchange="selecionarInimigo()">
        <option value="#">Selecione o inimigo!</option>
        <option value="0">En – Vida 120</option>
        <option value="1">Shin – Vida 150</option>
        <option value="2">Noi – Vida 200</option>
        <option value="3">Nikaido – Vida 180</option>
      </select>
    </label>

    <label>
      Escolha seu ataque:
      <select id="selectAtaque">
        <option value="0">Soco – Dano 10</option>
        <option value="1">Machado – Dano 20</option>
        <option value="2">Magia – Dano 35</option>
        <option value="3">Cusparada do Caiman – Dano 45</option>
      </select>
    </label>

    <button id="btnAtacar" onclick="atacar()">Atacar</button>

    <div id="res" class="resultado"></div>
    <div id="erro" style="color:#f55; margin-top:10px;"></div>
  </div>

  <script>
    let inimigos = [
      { nome: "En", vidaMax: 120, vida: 120, dano: 12 },
      { nome: "Shin", vidaMax: 150, vida: 150, dano: 15 },
      { nome: "Noi", vidaMax: 200, vida: 200, dano: 18 },
      { nome: "Nikaido", vidaMax: 180, vida: 180, dano: 14 }
    ];

    let ataques = [
      { nome: "Soco", dano: 10 },
      { nome: "Machado", dano: 20 },
      { nome: "Magia", dano: 35 },
      { nome: "Cusparada do Caiman", dano: 45 }
    ];

    let jogador = { vidaMax: 150, vida: 150 };

    const selectInimigo = document.getElementById("selectInimigo");
    const selectAtaque = document.getElementById("selectAtaque");
    const res = document.getElementById("res");
    const erro = document.getElementById("erro");


    function selecionarInimigo() {
      const i = selectInimigo.value;

      if (i === "#") {
        erro.innerHTML = "Escolha um inimigo!";
        return;
      }

      const index = Number(i);
      if (!Number.isInteger(index) || index < 0 || index >= inimigos.length) {
        erro.innerHTML = "Inimigo inválido.";
        return;
      }

      inimigos[index].vida = inimigos[index].vidaMax;
      jogador.vida = jogador.vidaMax;

      res.innerHTML = `<b>Novo inimigo selecionado:</b> ${inimigos[index].nome} (Vida: ${inimigos[index].vida})`;
      erro.innerHTML = "";
    }

    function calcularDano(vida, dano) {
      let novaVida = vida - dano;
      return novaVida < 0 ? 0 : novaVida;
    }

    function atacar() {
      let indexInimigo = selectInimigo.value;

      if (indexInimigo === "#") {
        erro.innerHTML = "Escolha um inimigo antes de atacar!";
        return;
      }

      erro.innerHTML = "";

      indexInimigo = Number(indexInimigo);
      const indexAtaque = Number(selectAtaque.value);

      if (!Number.isInteger(indexInimigo) || indexInimigo < 0 || indexInimigo >= inimigos.length) {
        erro.innerHTML = "Inimigo inválido.";
        return;
      }
      if (!Number.isInteger(indexAtaque) || indexAtaque < 0 || indexAtaque >= ataques.length) {
        erro.innerHTML = "Ataque inválido.";
        return;
      }

      const inimigo = inimigos[indexInimigo];
      const ataque = ataques[indexAtaque];

      if (inimigo.vida === 0 || jogador.vida === 0) {
        res.innerHTML += "<br><br>⚠ Troque o inimigo para reiniciar.";
        return;
      }

      inimigo.vida = calcularDano(inimigo.vida, ataque.dano);

      res.innerHTML += `<br><br>Você usou <b>${ataque.nome}</b> e causou <b>${ataque.dano}</b> de dano!
        <br>Vida do ${inimigo.nome}: <b>${inimigo.vida}/${inimigo.vidaMax}</b>`;

      if (inimigo.vida === 0) {
        res.innerHTML += `<br><br>Você derrotou ${inimigo.nome}!`;
        return;
      }

      jogador.vida = calcularDano(jogador.vida, inimigo.dano);

      res.innerHTML += `<br>${inimigo.nome} atacou e causou <b>${inimigo.dano}</b> de dano!
        <br>Sua vida: <b>${jogador.vida}/${jogador.vidaMax}</b>`;

      if (jogador.vida === 0) {
        res.innerHTML += `<br><br> Você foi derrotado...`;
      }
    }
  </script>
</body>
</html>
